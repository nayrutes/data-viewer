<Window x:Class="WorldCompanyDataViewer.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:map="clr-namespace:MapControl;assembly=MapControl.WPF"
        xmlns:local="clr-namespace:WorldCompanyDataViewer"
        mc:Ignorable="d"
        Title="MainWindow" Height="450" Width="800" Loaded="Window_Loaded">
    <Window.Resources>
        <CollectionViewSource x:Key="dataEntryViewSource"/>
    </Window.Resources>
    <Window.CommandBindings>
        <CommandBinding Command="local:CustomCommands.LoadCSV" Executed="LoadCSVCommand_Executed" CanExecute="CommonCommandBinding_CanExecute" />
        <CommandBinding Command="local:CustomCommands.RequestPostcodeLocations" Executed="RequestPostcodeLocations_Executed" CanExecute="RequestPostcodeLocations_CanExecute" />
    </Window.CommandBindings>
    <DockPanel>
        <!--<ToolBarTray DockPanel.Dock="Top">-->
        <ToolBar DockPanel.Dock="Top">
            <Button Command="local:CustomCommands.LoadCSV" Content="LoadCSV" />
            <Button Command="local:CustomCommands.RequestPostcodeLocations" Content="Analyze Postcode Locations" />
        </ToolBar>
        <TextBox x:Name="AnalysisStatusLabel" Text="Data Alaysis Status" DockPanel.Dock="Bottom" Height="40">
            <TextBox.Style>
                <Style TargetType="TextBox">
                    <Setter Property="IsReadOnly" Value="True" />
                    <Setter Property="BorderThickness" Value="0" />
                    <Setter Property="TextWrapping" Value="Wrap" />
                </Style>
            </TextBox.Style>
        </TextBox>
        <map:Map x:Name="MapControl" DockPanel.Dock="Right" Width="300"
                 MinZoomLevel="2" MaxZoomLevel="21" ZoomLevel="11"
                 Center="53.5,8.2" ManipulationMode="All">

            <map:MapPolyline x:Name="measurementLine" Visibility="Collapsed"
                             Stroke="{Binding Foreground, ElementName=map}"
                             StrokeThickness="2" StrokeDashArray="1,1"/>

            <map:MapItemsControl ItemsSource="{Binding Polylines}"/>

            <!--<map:MapItemsControl ItemContainerStyle="{StaticResource PointItemStyle}"
                                 ItemsSource="{Binding Points}"
                                 SelectionMode="Multiple"/>

            <map:MapItemsControl ItemContainerStyle="{StaticResource PushpinItemStyle}"
                                 ItemsSource="{Binding Pushpins}"
                                 SelectedItem="{Binding SelectedPushpin}"
                                 SelectionMode="Multiple"
                                 SelectionChanged="MapItemsControlSelectionChanged"/>-->

            <map:Pushpin AutoCollapse="True" Location="65,-18" Content="Iceland"/>
            <map:Pushpin AutoCollapse="True" Location="71,25" Content="Norway"/>
            <map:Pushpin AutoCollapse="True" Location="35,33" Content="Cyprus"/>
            <map:Pushpin AutoCollapse="True" Location="28.25,-16.5" Content="Tenerife"/>

            <map:MapPolygon Stroke="Yellow" StrokeThickness="2" Locations="53.45,8.1 53.45,8.3 53.55,8.3 53.55,8.1"/>

            <map:MapPath Location="53.5,8.2" Stroke="Blue" StrokeThickness="3" Fill="#1F007F00">
                <map:MapPath.Data>
                    <EllipseGeometry RadiusX="1852" RadiusY="1852"/>
                </map:MapPath.Data>
            </map:MapPath>

            <map:Pushpin AutoCollapse="True" Location="53.5,8.2" Content="N 53°30' E 8°12'"/>
        </map:Map>
        
        <!--<Label x:Name="AnalysisStatusLabel" DockPanel.Dock="Bottom" Height="40"/>-->
        <!--</ToolBarTray>-->
        <Grid>
            <DataGrid x:Name="categoryDataGrid" AutoGenerateColumns="True"
                      EnableRowVirtualization="True"
                      IsReadOnly="True"
                      ItemsSource="{Binding Source={StaticResource dataEntryViewSource}}" 
                      Margin="13,13,13,13" RowDetailsVisibilityMode="VisibleWhenSelected">
                <!--<DataGrid.Columns>
                    <DataGridTextColumn Binding="{Binding Id}"
                        Header="Entry Id" Width="SizeToHeader"
                        IsReadOnly="True"/>
                    <DataGridTextColumn Binding="{Binding FirstName}" Header="FirstName" 
                        Width="*"/>
                </DataGrid.Columns>-->
            </DataGrid>
        </Grid>
    </DockPanel>
    
</Window>
